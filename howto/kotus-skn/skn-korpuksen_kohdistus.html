<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta name="author" content="Mietta Lennes">
<title>Kotuksen Suomen kielen n‰ytteit‰ -korpuksen xml-muotoisten litteraattien kohdistaminen ‰‰nitiedostoihin</title></head><body>
<h2>Kotuksen Suomen kielen n‰ytteit‰ -korpuksen xml-muotoisten litteraattien kohdistaminen ‰‰nitiedostoihin</h2>

<br>

<p>T‰ll‰ sivulla on ohjeet Kotuksen SKN-korpuksen litteraattien ja niit‰ vastaavien ‰‰nitiedostojen kohdistamiseen.


<h4><A HREF="http://www.helsinki.fi/~lennes">Mietta Lennes</A> / FIN-CLARIN -projekti <br>17.6.2011</h4>
<em>Kohdistusskriptin virheet korjattu 17.6.2011:<br>
<ul>
<li>Tiedoston ensimm‰iselle virkkeelle tulee nyt aina oma alkuraja, jolloin koko ensimm‰isen virkkeen voi tarvittaessa siirt‰‰ alkamaan myˆhemmin (zoomaa ensin ulos Out-painikkeella). T‰m‰ auttaa tilanteissa, joissa litterointi on aloitettu vasta jonkin matkaa ‰‰nitteen alun j‰lkeen.
<li>Saman puhujan virkkeen ei en‰‰ pit‰isi vahingossa tulla edellisen virkkeen sis‰lle.
<li>Skripti valitsee automaattisesti viimeksi lis‰tyn virkkeen ja n‰ytt‰‰ alueen sen ymp‰rilt‰. Virkkeen voi kuunnella v‰littˆm‰sti painamalla Tab-n‰pp‰int‰ (Praatin n‰pp‰inoikotie, joka soittaa valittuna olevan alueen). Soitto loppuu n‰pp‰imell‰ Esc.
</ul>
</em>

<ul>
<!--
<li><A HREF="#esittely">Johdanto</A>
<li><A HREF="#esimerkki">Esimerkki</a>
<li><A HREF="#ohje">K&auml;ytt&ouml;ohje</a>
-->
</ul>

<br><br>

<h4>Ohjelmien asentaminen</h4>
<ul>
<li>Asenna koneellesi <A HREF="http://www.praat.org">Praat-ohjelma</A>. (Praatin asennus ei vaadi yll‰pit‰j‰n oikeuksia, joten sen voi kuka tahansa asentaa minne tahansa koska tahansa.)
<li>Voit asentaa valmiiksi myˆs <A HREF="http://www.lat-mpi.eu/tools/elan/">Elan-ohjelman</A> (t‰ss‰ vaiheessa Elan-ohje viel‰ puuttuu t‰lt‰ sivulta). Kun ‰‰nitiedoston ja litteraatin kohdistus on tehty Praatilla, vied‰‰n tiedosto seuraavaksi Elan-formaattiin, jotta korpus myˆhemmin toimii CSC:n Kielipankkiin asennetussa haku- ja selailuymp‰ristˆss‰ (Annex ja Trova).
<p>
<li>Hae omalle koneellesi seuraavat Praat-skriptit (klikkaa hiiren oikealla napilla ja valitse <b>Save link as...</b>):
<ul>
<li><A HREF="mark_pauses.praat">mark_pauses.praat</A> (skripti jolla etsit‰‰n ‰‰nitiedostosta alustavasti hiljaisia ja ‰‰nekk‰it‰ kohtia)
<li><A HREF="label_sentences_from_text_file.praat">label_sentences_from_text_file.praat</A> (litteraatissa olevien virkkeiden kohdistustyˆkalu)
</ul>
</ul>


<h4>Taukojen etsint‰ ‰‰nitiedostosta</h4>

<ul>
<li>Avaa Praat-ohjelma. (<A HREF="http://www.helsinki.fi/puhetieteet/atk/praat/">Suomenkielinen Praat-opas</A>)
<li>Valitse Praatin objekti-ikkunassa <b>Open...: Open long sound file...</b> ja avaa ‰‰nitiedosto, johon ryhdyt kohdistamaan litteraattia.
<li>Avaa Praatiin skriptitiedosto mark_pauses.praat (<b>Open...: Read from file...</b>) ja suorita se skripti-ikkunan komennolla <b>Run:Run</b>.
<li>Skripti pys‰htyy hetken kuluttua, jolloin voit v‰lill‰ tarkistaa, kuinka taukoanalyysi onnistuu: Valitse objektilistalta yht‰ aikaa sek‰ LongSound-objekti ett‰
sit‰ vastaava TextGrid-objekti ja paina <b>View & Edit</b>. Selaile ‰‰nitiedostoa. Jos xxx-merkittyj‰ taukoehdokkaita n‰ytt‰‰ olevan liian tihe‰ss‰ tai harvassa,
keskeyt‰ skriptin suoritus painamalla <b>Stop</b>. Valitse nyt uudestaan pelkk‰ LongSound-objekti ja suorita skripti uudestaan alusta saakka. Jos taukoja oli ‰sken liikaa,
pienenn‰ aloituslomakkeessa olevaa parametria <em>Maximum intensity (dB)</em> esimerkiksi yhdell‰. Jos taas taukoja oli liian harvassa, nosta intensiteettirajaa vastaavasti yhdell‰ tai kahdella.
Kokeile uudelleen. Toista t‰t‰ vaihetta tarvittaessa useita kertoja eri arvoilla. Optimaalinen intensiteettiraja voi olla erilainen eri ‰‰nitiedostoille.
<li>Kun olet tyytyv‰inen lopputulokseen, paina Continue ja anna skriptin merkata loputkin tauot.
<li>Tallenna lopputuloksena saatu TextGrid-tiedosto: Valitse TextGrid-objekti objektilistalta ja valitse <b>Save...: Save as short text file...</b>
</ul>


<h4>Praat-ohjelman asetukset</h4>
<UL>
<li>Kun ensimm‰isen kerran avaat TextGrid-editorin, tarkista editori-ikkunasta seuraava asetus:<br>
<b>File: Preferences...:</b> With the shift key, you drag... a single boundary<br>
T‰m‰ asetus helpottaa kohdistustyˆt‰, koska eri kerroksissa samassa aikapisteess‰ olevat rajat siirtyv‰t automaattisesti yht‰ aikaa, kun ved‰t yht‰ niist‰ hiirell‰.
</ul>


<h4>Litteraatin kohdistaminen</h4>

<p>Huom. T&auml;ss&auml; kuvattu Praat-skripti on vasta testik&auml;yt&ouml;ss&auml; ja saattaa siis sis&auml;lt&auml;&auml; virheit&auml;! Jos skripti ei mielest&auml;si toimi oikein tai huomaat t&auml;ss&auml; ohjeessa puutteita, otan mielell&auml;ni vastaan korjausehdotuksia :-)

<ul>
<li>Tallenna ‰sken k‰sittelem‰‰si ‰‰nitiedostoa vastaava xml-muotoinen litteraatti nimell‰ <em>labels.xml</em> samaan hakemistoon, jossa ovat myˆs
verkosta lataamasi Praat-skriptit. Varmista, ett‰ litteraatti on Unicode-muodossa (UTF-8)!
<li>Avaa Praatilla skriptitiedosto label_sentences_from_text_file.praat (Open...: Read from file...)
<li>Avaa Praatilla ‰skeinen ‰‰nitiedosto ja sille luomasi TextGrid. Tarkista, ett‰ ne ovat yht‰ aikaa valittuna objektilistalla. 
<li>Valitse sitten skripti-ikkunasta <b>Run:Run</b>.
<li>Skripti lis‰‰ TextGridiin yksi kerrallaan intervalleja, jotka vastaavat xml-tiedostossa esiintyvi‰ virkkeit‰. Kunkin puhujan virkkeet tulevat omaan kerrokseensa (tier).
Skripti "arvaa" taukoanalyysin perusteella puhetta sis‰lt‰vi‰ p‰tki‰, joihin se ehdottaa virkkeit‰. Sinun teht‰v‰n‰si on tarkistaa kunkin virkkeen alku- ja loppurajat kuuntelemalla ja ‰‰nen aaltomuotoa katsomalla.
<li>Skripti ehdottaa seuraavan virkkeen paikaksi sellaista alimmassa kerroksessa olevaa intervallia, jonka nimike ei ole "xxx" ja jonka p‰‰ttymisaika on viimeiseksi p‰‰ttyneen virkkeen p‰‰ttymisajan j‰lkeen.
<li>Skripti valitsee automaattisesti viimeksi lis‰tyn virkkeen ja n‰ytt‰‰ alueen sen ymp‰rilt‰. Virkkeen voi kuunnella v‰littˆm‰sti painamalla Tab-n‰pp‰int‰ (Praatin n‰pp‰inoikotie, joka soittaa valittuna olevan alueen). Soitto loppuu n‰pp‰imell‰ Esc.
<li>Vinkki: Vierekk‰isten tai p‰‰llekk‰isten intervallien/yksikˆiden v‰lill‰ voi liikkua nopeasti k‰ytt‰m‰ll‰ n‰pp‰inoikotiet‰ Alt+nuolin‰pp‰in.
<li>ƒl‰ koske kahteen alimpaan kerrokseen (sentence_id ja utterance)! Skripti tarvitsee niit‰ toimiakseen.
<li>T‰ss‰ vaiheessa riitt‰‰ rajata karkeasti vain virkkeen alku ja loppu, vaikka virke sis‰lt‰isikin taukoja. 
<li>Aina kun olet tyytyv‰inen edelt‰v‰n virkkeen rajaukseen, klikkaa Jatka.
<li>Skripti tallentaa TextGrid-tiedoston automaattisesti kunkin virkkeen lis‰yksen j‰lkeen.
</ul>




<ul>
<li>(Myˆhemmin on luvassa viel‰ yksi skripti, jolla lis‰t‰‰n automaattisesti kerrokset yksitt‰isille saneille ("normi" ja puhuttu muoto sek‰ n‰iden id-tagit). 
Skripti suoritetaan vasta edellisen kohdistusvaiheen j‰lkeen. Ohje tulee t‰lle sivulle.)
</ul>



<br><br>
<p>PS. T‰‰lt‰ lˆytyy myˆs se <A HREF="http://www.helsinki.fi/~lennes/praat-scripts/howto/keskustelun_litterointi.html">keskustelun litteraatin pulautusskripti ohjeineen...</a>


<p>
(Lis&auml;apua skriptien ajamisessa: ks. <a href="http://www.helsinki.fi/puhetieteet/atk/praat/">suomenkielinen Praat-opas</a>)<br>


<br>
<br>
<a href="../../index.html">Praat-skriptisivulle</a>
<br>
</body></html>
